_format_version: "3.0"
_transform: true

services:
  - name: author-service
    url: http://author:8082/api/v1/authors
    routes:
      - name: author-service-routes
        paths: 
          - /api/v1/authors

  - name: book-service
    url: http://book:8081/api/v1/books
    routes:
      - name: book-service-routes
        paths: 
          - /api/v1/books
plugins:
  - name: key-auth
    config:
      key_names: 
        - "x-api-key"
      key_in_header: true
      
  - name: rate-limiting
    config:
      policy: "local"
      limit_by: "ip"
      second: 5
      hour: 10000


consumers:
  - username: "david"
    keyauth_credentials:
    - key: my-key